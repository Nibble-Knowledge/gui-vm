INF
PINF
BADR 19
EPINF
DSEC D_SEC
DNUM 3
DSIZE 2
DNUM 1
DSIZE 1
NSTART 3
EINF
LOD &(return[0])[0]
STR DRIVER_SERIAL.Exit[1]
LOD &(return[0])[1]
STR DRIVER_SERIAL.Exit[2]
LOD &(return[0])[2]
STR DRIVER_SERIAL.Exit[3]
LOD &(return[0])[3]
STR DRIVER_SERIAL.Exit[4]
LOD DAT[0]
STR DRIVER_SERIAL.TxByte[0]
LOD DAT[1]
STR DRIVER_SERIAL.TxByte[1]
LOD 3
JMP DRIVER_SERIAL.TxEnter
return:
NOP 0
DRIVER_SERIAL.RxEnter:
LOD 7
STR 0
LOD 11
STR 1
LOD 1
NND 5
NND 18
STR DRIVER_SERIAL.RxGotData[0]
LOD DRIVER_SERIAL.RxGotData
JMP DRIVER_SERIAL.Done
LOD 2
STR DRIVER_SERIAL.RxByte[0]
LOD 3
STR 1
LOD 11
STR 1
LOD 2
STR DRIVER_SERIAL.RxByte[1]
LOD 3
STR 1
LOD 3
JMP DRIVER_SERIAL.Done
DRIVER_SERIAL.TxEnter:
LOD 7
STR 0
LOD 7
STR 1
LOD DRIVER_SERIAL.TxByte[0]
STR 2
LOD 3
STR 1
LOD 7
STR 1
LOD DRIVER_SERIAL.TxByte[1]
STR 2
LOD 3
STR 1
LOD 3
JMP DRIVER_SERIAL.Done
DRIVER_SERIAL.Done:
LOD 18
STR 0
LOD 3
DRIVER_SERIAL.Exit:
JMP 0x0000
DAT: D_SEC: .data 2 0x41
DRIVER_SERIAL.TxByte: .data 2
DRIVER_SERIAL.RxByte: .data 2
DRIVER_SERIAL.RxGotData: .data 1
